{"version":3,"sources":["webpack:///webpack/bootstrap 3297edb01c44868fdf9e","webpack:///./src/root.less","webpack:///./src/root.jsx"],"names":["Root","props","toggleInput","bind","handleSubmit","state","news","ticker","close","open","priceChange","inputShow","error","fetchNews","fetchDetails","fetch","then","response","json","cleanArray","Object","keys","map","key","todayDetails","yesterdayDetails","setState","toFixed","catch","api_key","search_url","fetchHeaders","headers","value","date","seconds","Math","floor","Date","interval","article","index","newsContainer","truncate","url","name","provider","timeSince","datePublished","event","console","log","target","newsInput","details","tickerNews","tickerInput","React","Component","quip","elements","initialize","initializationCallback","root","ReactDOM","render"],"mappings":"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","file":"element.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"dist\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3297edb01c44868fdf9e","// removed by extract-text-webpack-plugin\nmodule.exports = {\"news\":\"wZCJ5NZMxDLOtvkTS64kN\",\"newsInput\":\"_3j3n8vdkkF4_zxLwhIScaf\",\"newsContainer\":\"_2G9IqEX8QmQBQoiXWRSzJY\",\"truncate\":\"_3yQEETRaRRRH5T6uLam7nM\",\"details\":\"_3Lffc8eoLpgx_3GWIc5TCY\",\"priceChange\":\"_1i3ysy_yFq_F-ea1ZQd6nH\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/root.less\n// module id = 0\n// module chunks = 0","// Copyright 2017 Quip\n//import Service from \"./service.jsx\"\nimport Styles from \"./root.less\";\n\nclass Root extends React.Component {\n    constructor(props) {\n        super(props);\n        this.toggleInput = this.toggleInput.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.state = {\n            news: null,\n            ticker: 'CRM',\n            close: null,\n            open: null,\n            priceChange: null,\n            inputShow: false,\n            error: []\n        }\n    }\n\n    componentWillMount() {\n        let ticker = this.state.ticker;\n        this.fetchNews(ticker);\n        this.fetchDetails(ticker);\n    }\n\n    fetchDetails(ticker) {\n        fetch(`https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol=${ticker}&apikey=AU2Q75AJK6FBD0KQ`).then(response => response.json())\n        .then(json => {\n            //Clean array\n            let cleanArray = Object.keys(json['Time Series (Daily)']).map((key) => { return json['Time Series (Daily)'][key]; });\n            //Save only today's and yesterday's details\n            let todayDetails = cleanArray[0];\n            let yesterdayDetails = cleanArray[1];\n\n            this.setState({\n                close: todayDetails[\"4. close\"],\n                open: todayDetails[\"1. open\"],\n                priceChange: (todayDetails[\"4. close\"] - yesterdayDetails[\"4. close\"]).toFixed(2)\n            })\n        })\n        .catch(err => {\n            this.setState({error:[...this.state.error, error]})\n        })\n    }\n\n    fetchNews(ticker) {\n        const api_key = '60c438deac3f44ee98d47227f06193e1'\n        const search_url = 'https://api.cognitive.microsoft.com/bing/v7.0/news/search'\n        const fetchHeaders = {\n            'Ocp-Apim-Subscription-Key': `${api_key}`\n        }\n\n        fetch(`${search_url}?q=$${ticker}+stock&sortby=date&count=3`, {headers: fetchHeaders}).then(response => response.json())\n            .then(json => {\n                this.setState({news: json.value})\n            })\n            .catch(error => {\n                this.setState({error:[...this.state.error, error]})\n            })\n    }\n\n    timeSince(date) {\n        let seconds = Math.floor((new Date() - new Date(date)) / 1000)\n\n        let interval = Math.floor(seconds / 31536000)\n        if (interval >= 1) {\n            if (interval == 1){\n                return interval + ' year ago'\n            }\n            return interval + ' years ago'\n        }\n\n        interval = Math.floor(seconds / 2592000)\n        if (interval >= 1) {\n            if (interval == 1){\n                return interval + ' month ago'\n            }\n            return interval + ' months ago'\n        }\n\n        interval = Math.floor(seconds / 86400)\n        if (interval >= 1) {\n            if (interval == 1){\n                return interval + ' day ago'\n            }\n            return interval + ' days ago'\n        }\n\n        interval = Math.floor(seconds / 3600)\n\n        if (interval >= 1) {\n            if (interval == 1){\n                return interval + ' hour ago'\n            }\n            return interval + ' hours ago'\n        }\n\n        interval = Math.floor(seconds / 60)\n\n        if (interval >= 1) {\n            if (interval == 1){\n                return interval + ' minute ago'\n            }\n            return interval + ' minutes ago'\n        }\n\n        interval = Math.floor(seconds)\n\n        if (interval == 1){\n            return interval + ' second ago'\n        }\n\n        return interval + ' seconds ago'\n    }\n\n    tickerNews() {\n        return this.state.news.map((article, index) =>\n            <div className={Styles.newsContainer} key={index}>\n                <h4 className={Styles.truncate}>\n                    <a href={article.url} target=\"_blank\">{article.name}</a>\n                </h4>\n                <div>\n                    <span>{article.provider[0].name} | {this.timeSince(article.datePublished)}\n                    </span>\n                </div>\n            </div>\n        )\n    }\n\n    handleSubmit(event) {\n        console.log('try');\n        console.log(event.target);\n        this.setState({ticker: event.target.value});\n        console.log(this.state.ticker);\n    }\n\n    toggleInput() {\n        return this.state.inputShow ? this.setState({ inputShow : false }) : this.setState({ inputShow : true });\n    }\n\n    tickerInput() {\n        if(this.state.inputShow) {\n            return (\n                <div>\n                    <div className={Styles.newsInput}>\n                      <input placeholder=\"Change Ticker\" />\n                      <button onClick={this.handleSubmit}>Change</button>\n                    </div>\n                    <a onClick={this.toggleInput}>Close</a>\n                </div>\n            )\n        }\n        else {\n            return ( <a onClick={this.toggleInput}>Change Ticker Symbol</a> );\n        }\n    }\n\n    render() {\n        return (\n          <div className={Styles.news}>\n            <div className={Styles.details}>\n                <h3>{this.state.ticker}</h3>\n                <div className={Styles.priceChange}>\n                    {this.state.priceChange}\n                </div>\n            </div>\n            {this.state.news ? this.tickerNews() : null}\n            {this.tickerInput()}\n          </div>\n        );\n    }\n}\n\nquip.elements.initialize({\n    initializationCallback: function(root) {\n        ReactDOM.render(<Root/>, root);\n    }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/root.jsx"],"sourceRoot":""}